webpackJsonp([1],{"+h1B":function(n,t,e){"use strict";var u=e("/oeL"),l=e("aR8+"),c=e("wQAS"),o=e("8Eky"),i=e("q4dy"),r=e("qbdv"),a=e("fc+i"),s=e("bm2B"),f=e("CPp0"),p=e("BkNc"),h=e("dD7Z"),d=e("Od1H"),g=e("b25N"),m=e("vnfH");e.d(t,"a",function(){return v});var v=u.a(l.a,[c.a],function(n){return u.b([u.c(512,u.d,u.e,[[8,[o.a,i.a]],[3,u.d],u.f]),u.c(5120,u.g,u.h,[[3,u.g]]),u.c(4608,r.a,r.b,[u.g]),u.c(5120,u.i,u.j,[]),u.c(5120,u.k,u.l,[]),u.c(5120,u.m,u.n,[]),u.c(4608,a.b,a.c,[r.c]),u.c(6144,u.o,null,[a.b]),u.c(4608,a.d,a.e,[]),u.c(5120,a.f,function(n,t,e,u){return[new a.g(n),new a.h(t),new a.i(e,u)]},[r.c,r.c,r.c,a.d]),u.c(4608,a.j,a.j,[a.f,u.p]),u.c(135680,a.k,a.k,[r.c]),u.c(4608,a.l,a.l,[a.j,a.k]),u.c(6144,u.q,null,[a.l]),u.c(6144,a.m,null,[a.k]),u.c(4608,u.r,u.r,[u.p]),u.c(4608,a.n,a.n,[r.c]),u.c(4608,a.o,a.o,[r.c]),u.c(4608,s.a,s.a,[]),u.c(4608,f.a,f.a,[]),u.c(4608,f.b,f.c,[]),u.c(5120,f.d,f.e,[]),u.c(4608,f.f,f.f,[f.a,f.b,f.d]),u.c(4608,f.g,f.h,[]),u.c(5120,f.i,f.j,[f.f,f.g]),u.c(5120,p.a,p.b,[p.c]),u.c(4608,p.d,p.d,[]),u.c(6144,p.e,null,[p.d]),u.c(135680,p.f,p.f,[p.c,u.s,u.t,u.u,p.e]),u.c(4608,p.g,p.g,[]),u.c(5120,p.h,p.i,[p.j]),u.c(5120,u.v,function(n){return[n]},[p.h]),u.c(4608,h.a,h.a,[]),u.c(4608,d.a,d.a,[h.a]),u.c(512,r.d,r.d,[]),u.c(1024,u.w,a.p,[]),u.c(1024,u.x,function(){return[p.k()]},[]),u.c(512,p.j,p.j,[u.u]),u.c(1024,u.y,function(n,t,e){return[a.q(n,t),p.l(e)]},[[2,a.r],[2,u.x],p.j]),u.c(512,u.z,u.z,[[2,u.y]]),u.c(131584,u.A,u.A,[u.p,u.B,u.u,u.w,u.d,u.z]),u.c(2048,u.C,null,[u.A]),u.c(512,u.D,u.D,[u.C]),u.c(512,a.s,a.s,[[3,a.s]]),u.c(512,s.b,s.b,[]),u.c(512,s.c,s.c,[]),u.c(512,f.k,f.k,[]),u.c(1024,p.m,p.n,[[3,p.c]]),u.c(512,p.o,p.p,[]),u.c(512,p.q,p.q,[]),u.c(256,p.r,{},[]),u.c(1024,r.e,p.s,[r.f,[2,r.g],p.r]),u.c(512,r.h,r.h,[r.e]),u.c(512,u.t,u.t,[]),u.c(512,u.s,u.E,[u.t,[2,u.F]]),u.c(1024,p.t,function(){return[[{path:"",redirectTo:"/vending-machine",pathMatch:"full"},{path:"vending-machine",component:g.a}]]},[]),u.c(1024,p.c,p.u,[u.C,p.o,p.q,r.h,u.u,u.s,u.t,p.t,p.r,[2,p.v],[2,p.w]]),u.c(512,p.x,p.x,[[2,p.m],[2,p.c]]),u.c(512,m.a,m.a,[]),u.c(512,l.a,l.a,[])])})},"+toR":function(n,t,e){"use strict";e.d(t,"a",function(){return u});var u=function(){function n(n,t,e,u){this.id=n,this.name=t,this.price=e,this.count=u}return n}()},0:function(n,t,e){n.exports=e("cDNt")},"8Eky":function(n,t,e){"use strict";function u(n){return a._25(0,[(n()(),a._26(0,null,null,4,"span",[],null,null,null,null,null)),(n()(),a._29(null,["\n      "])),(n()(),a._26(0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var u=!0,l=n.component;if("click"===t){u=!1!==l.push(n.context.$implicit)&&u}return u},null,null)),(n()(),a._29(null,[""," (",")"])),(n()(),a._29(null,["\n    "]))],null,function(n,t){n(t,2,0,0==t.context.$implicit.count),n(t,3,0,t.context.$implicit.amount,t.context.$implicit.count)})}function l(n){return a._25(0,[(n()(),a._26(0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),a._29(null,["Сообщение: ",""]))],null,function(n,t){n(t,1,0,t.component.message)})}function c(n){return a._25(0,[(n()(),a._26(0,null,null,4,"span",[],null,null,null,null,null)),(n()(),a._29(null,["\n      "])),(n()(),a._26(0,null,null,1,"span",[],null,null,null,null,null)),(n()(),a._29(null,[""," (",") |"])),(n()(),a._29(null,["\n    "]))],null,function(n,t){n(t,3,0,t.context.$implicit.amount,t.context.$implicit.count)})}function o(n){return a._25(0,[(n()(),a._26(0,null,null,4,"span",[],null,null,null,null,null)),(n()(),a._29(null,["\n      "])),(n()(),a._26(0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var u=!0,l=n.component;if("click"===t){u=!1!==l.buy(n.context.$implicit)&&u}return u},null,null)),(n()(),a._29(null,[""," - "," (",")"])),(n()(),a._29(null,["\n    "]))],null,function(n,t){n(t,2,0,0==t.context.$implicit.count),n(t,3,0,t.context.$implicit.name,t.context.$implicit.price,t.context.$implicit.count)})}function i(n){return a._25(0,[(n()(),a._26(0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),a._29(null,["Кошелёк пользователя (",")"])),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,4,"div",[],null,null,null,null,null)),(n()(),a._29(null,["\n  "])),(n()(),a._30(16777216,null,null,1,null,u)),a._27(802816,null,0,s.n,[a.V,a._7,a.k],{ngForOf:[0,"ngForOf"]},null),(n()(),a._29(null,["\n"])),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),a._29(null,["Внесенно: ",""])),(n()(),a._29(null,["\n"])),(n()(),a._30(16777216,null,null,1,null,l)),a._27(16384,null,0,s.o,[a.V,a._7],{ngIf:[0,"ngIf"]},null),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,1,"button",[],null,[[null,"click"]],function(n,t,e){var u=!0,l=n.component;if("click"===t){u=!1!==l.change()&&u}return u},null,null)),(n()(),a._29(null,["Сдача"])),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),a._29(null,["Кошелёк машины (",")"])),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,4,"div",[],null,null,null,null,null)),(n()(),a._29(null,[" |\n  "])),(n()(),a._30(16777216,null,null,1,null,c)),a._27(802816,null,0,s.n,[a.V,a._7,a.k],{ngForOf:[0,"ngForOf"]},null),(n()(),a._29(null,["\n"])),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),a._29(null,["Товары"])),(n()(),a._29(null,["\n"])),(n()(),a._26(0,null,null,4,"div",[],null,null,null,null,null)),(n()(),a._29(null,["\n  "])),(n()(),a._30(16777216,null,null,1,null,o)),a._27(802816,null,0,s.n,[a.V,a._7,a.k],{ngForOf:[0,"ngForOf"]},null),(n()(),a._29(null,["\n"])),(n()(),a._29(null,["\n"]))],function(n,t){var e=t.component;n(t,6,0,e.userPocket),n(t,13,0,e.showMessage),n(t,24,0,e.machinePocket),n(t,33,0,e.products)},function(n,t){var e=t.component;n(t,1,0,e.userAmount),n(t,10,0,e.pendingAmount),n(t,19,0,e.machineAmount)})}function r(n){return a._25(0,[(n()(),a._26(0,null,null,1,"vending-machine",[],null,null,null,i,d)),a._27(114688,null,0,f.a,[p.a],null,null)],function(n,t){n(t,1,0)},null)}var a=e("/oeL"),s=e("qbdv"),f=e("b25N"),p=e("Od1H");e.d(t,"a",function(){return g});var h=[],d=a._24({encapsulation:2,styles:h,data:{}}),g=a._28("vending-machine",f.a,r,{},{},[])},NhKt:function(n,t,e){"use strict";e.d(t,"a",function(){return u});var u=["h1[_ngcontent-%COMP%]{font-size:1.2em;color:#999;margin-bottom:0}h2[_ngcontent-%COMP%]{font-size:2em;margin-top:0;padding-top:0}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:5px 10px;text-decoration:none;margin-top:10px;display:inline-block;background-color:#eee;border-radius:4px}a[_ngcontent-%COMP%]:link, nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#607d8b}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#039be5}"]},Od1H:function(n,t,e){"use strict";var u=e("ewEW"),l=e("+toR"),c=e("dD7Z");e.d(t,"a",function(){return o});var o=function(){function n(n){this.localStorageService=n,this.userPocket=[],this.machinePocket=[],this.products=[],this.userPocket=this.localStorageService.get("user-pocket",[new u.a(1,"",1,10),new u.a(2,"",2,30),new u.a(5,"",5,20),new u.a(10,"",10,15)]).map(function(n){return new u.a(n.id,n.title,n.amount,n.count)}),this.machinePocket=this.localStorageService.get("machine-pocket",[new u.a(1,"",1,100),new u.a(2,"",2,100),new u.a(5,"",5,100),new u.a(10,"",10,100)]).map(function(n){return new u.a(n.id,n.title,n.amount,n.count)}),this.products=this.localStorageService.get("products",[new l.a(13,"Чай",13,10),new l.a(18,"Кофе",18,20),new l.a(21,"Кофе с молоком",21,20),new l.a(35,"Сок",35,15)]).map(function(n){return new l.a(n.id,n.name,n.price,n.count)}),this.pendingAmountValue=this.localStorageService.get("pending-amount-value",0)}return Object.defineProperty(n.prototype,"pendingAmount",{get:function(){return this.pendingAmountValue},enumerable:!0,configurable:!0}),n.prototype.pushCoin=function(n){this.userPocket.find(function(t){return t.id==n.id}).count--,this.pendingAmountValue+=n.amount,e.i(u.b)(this.machinePocket,n.id),this.localStorageService.set("user-pocket",this.userPocket),this.localStorageService.set("machine-pocket",this.machinePocket),this.localStorageService.set("pending-amount-value",this.pendingAmountValue)},n.prototype.getProduct=function(n){var t=this.products.find(function(t){return t.id==n});return!(this.pendingAmount<t.price||t.count<1)&&(t.count--,this.pendingAmountValue-=t.price,this.localStorageService.set("products",this.products),this.localStorageService.set("pending-amount-value",this.pendingAmountValue),!0)},n.prototype.getChange=function(){for(var n=this.pendingAmountValue,t=[],l=0,c=this.machinePocket.sort(function(n,t){return t.amount-n.amount});l<c.length;l++){var o=c[l],i=Math.min(o.count,Math.trunc(n/o.amount));if(i>0){var r=new u.a(o.id,o.title,o.amount,i);if(t.push(r),o.count-=i,0==(n-=r.totalAmount))break}}return e.i(u.c)(this.userPocket,t),this.pendingAmountValue=n,this.localStorageService.set("user-pocket",this.userPocket),this.localStorageService.set("machine-pocket",this.machinePocket),this.localStorageService.set("pending-amount-value",this.pendingAmountValue),0==this.pendingAmountValue},n.ctorParameters=function(){return[{type:c.a}]},n}()},"aR8+":function(n,t,e){"use strict";e.d(t,"a",function(){return u});var u=function(){function n(){}return n}()},b25N:function(n,t,e){"use strict";var u=e("Od1H");e.d(t,"a",function(){return l});var l=function(){function n(n){this.vendingMachineService=n,this.message=null}return Object.defineProperty(n.prototype,"products",{get:function(){return this.vendingMachineService.products},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"userPocket",{get:function(){return this.vendingMachineService.userPocket.sort(function(n,t){return n.amount-t.amount})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"userAmount",{get:function(){for(var n=0,t=0,e=this.vendingMachineService.userPocket;t<e.length;t++){n+=e[t].totalAmount}return n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"machinePocket",{get:function(){return this.vendingMachineService.machinePocket.sort(function(n,t){return n.amount-t.amount})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"machineAmount",{get:function(){for(var n=0,t=0,e=this.vendingMachineService.machinePocket;t<e.length;t++){n+=e[t].totalAmount}return n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pendingAmount",{get:function(){return this.vendingMachineService.pendingAmount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showMessage",{get:function(){return null!==this.message},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){},n.prototype.push=function(n){this.vendingMachineService.pushCoin(n),this.message=null},n.prototype.change=function(){this.vendingMachineService.getChange(),this.message=null},n.prototype.buy=function(n){this.vendingMachineService.getProduct(n.id)?this.message="Спасибо!":this.message="Недостаточно денег"},n.ctorParameters=function(){return[{type:u.a}]},n}()},cDNt:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=e("+h1B"),l=e("fc+i");e.i(l.a)().bootstrapModuleFactory(u.a)},dD7Z:function(n,t,e){"use strict";e.d(t,"a",function(){return u});var u=function(){function n(){}return n.prototype.clear=function(){localStorage.clear()},n.prototype.get=function(n,t){var e=localStorage.getItem(n);return null===e?this.set(n,t):JSON.parse(e)},n.prototype.set=function(n,t){return localStorage.setItem(n,JSON.stringify(t)),t},n}()},ewEW:function(n,t,e){"use strict";function u(n,t){return n.find(function(n){return n.id==t}).count++,n}function l(n,t){for(var e=0,u=t;e<u.length;e++){var l=u[e];!function(t){n.find(function(n){return n.id==t.id}).count+=t.count}(l)}return n}e.d(t,"a",function(){return c}),t.b=u,t.c=l;var c=function(){function n(n,t,e,u){this.id=n,this.title=t,this.amount=e,this.count=u}return Object.defineProperty(n.prototype,"totalAmount",{get:function(){return this.amount*this.count},enumerable:!0,configurable:!0}),n}()},q4dy:function(n,t,e){"use strict";function u(n){return o._25(0,[(n()(),o._26(16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),o._27(212992,null,0,i.y,[i.q,o.V,o.d,[8,null],o.S],null,null)],function(n,t){n(t,1,0)},null)}function l(n){return o._25(0,[(n()(),o._26(0,null,null,1,"my-app",[],null,null,null,u,s)),o._27(49152,null,0,r.a,[],null,null)],null,null)}var c=e("NhKt"),o=e("/oeL"),i=e("BkNc"),r=e("wQAS");e.d(t,"a",function(){return f});var a=[c.a],s=o._24({encapsulation:0,styles:a,data:{}}),f=o._28("my-app",r.a,l,{},{},[])},qtrl:function(n,t){function e(n){throw new Error("Cannot find module '"+n+"'.")}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id="qtrl"},vnfH:function(n,t,e){"use strict";var u=e("b25N");e.d(t,"a",function(){return l});var l=(u.a,function(){function n(){}return n}())},wQAS:function(n,t,e){"use strict";e.d(t,"a",function(){return u});var u=function(){function n(){this.title="Vending Machine"}return n}()}},[0]);